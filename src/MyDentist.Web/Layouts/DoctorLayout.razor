@using MyDentist.Web.Shared.Components
@using MyDentist.Web.Shared.Localization
@using Microsoft.Extensions.Localization
@inherits LayoutComponentBase
@inject IStringLocalizer<Global> L

<!-- Mobile sidebar toggle (CSS-only) -->
<input id="doc-sidebar" type="checkbox" class="sr-only peer">

<div class="flex h-screen bg-gray-50 overflow-hidden">

    <!-- Mobile overlay -->
    <label for="doc-sidebar" class="fixed inset-0 bg-black/30 z-20 hidden peer-checked:block md:hidden"></label>

    <!-- Sidebar -->
    <aside class="fixed md:static inset-y-0 left-0 z-30 w-64 flex flex-col bg-white border-r border-gray-100 shadow-xl md:shadow-none -translate-x-full peer-checked:translate-x-0 md:translate-x-0 transition-transform duration-300 ease-in-out shrink-0">

        <!-- Sidebar header -->
        <div class="px-5 h-16 flex items-center justify-between border-b border-gray-100 shrink-0">
            <BrandMark />
            <label for="doc-sidebar" class="md:hidden p-1 text-gray-400 hover:text-gray-600 cursor-pointer rounded-lg hover:bg-gray-100 transition-colors">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </label>
        </div>

        <!-- Nav -->
        <nav class="flex-1 px-3 py-5 space-y-0.5 overflow-y-auto">
            <p class="px-3 mb-2 text-xs font-semibold text-gray-400 uppercase tracking-wider">@L["Portal_NavMain"]</p>

            <a href="/doctor/dashboard" class="flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-gray-700 rounded-xl hover:bg-primary-50 hover:text-primary-700 group transition-all duration-150">
                <svg class="w-5 h-5 text-gray-400 group-hover:text-primary-600 transition-colors shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"/>
                </svg>
                @L["Portal_NavDashboard"]
            </a>

            <a href="/doctor/patients"
                <svg class="w-5 h-5 text-gray-400 group-hover:text-primary-600 transition-colors shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"/>
                </svg>
                @L["Portal_NavPatients"]
            </a>
        </nav>

        <!-- User profile -->
        <div class="px-3 py-4 border-t border-gray-100 shrink-0">
            <div class="flex items-center gap-3 px-3 py-2.5 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors">
                <div class="w-8 h-8 rounded-full bg-primary-100 flex items-center justify-center shrink-0">
                    <span class="text-xs font-bold text-primary-700">DR</span>
                </div>
                <div class="flex-1 min-w-0">
                    <p class="text-sm font-medium text-gray-900 truncate">Doctor</p>
                    <p class="text-xs text-gray-500 truncate">doctor&#64;example.com</p>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main area -->
    <div class="flex-1 flex flex-col min-w-0">

        <!-- Topbar -->
        <header class="bg-white border-b border-gray-100 px-4 sm:px-6 h-16 flex items-center justify-between shrink-0">
            <div class="flex items-center gap-3">
                <label for="doc-sidebar" class="md:hidden p-2 rounded-lg text-gray-500 hover:bg-gray-100 cursor-pointer transition-colors">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"/>
                    </svg>
                </label>
                <h1 class="text-base font-semibold text-gray-900">@L["Portal_DoctorTitle"]</h1>
            </div>
            <div class="flex items-center gap-2">
                <button class="relative p-2 rounded-lg text-gray-500 hover:bg-gray-100 transition-colors">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"/>
                    </svg>
                    <span class="absolute top-1.5 right-1.5 w-2 h-2 bg-primary-500 rounded-full ring-2 ring-white"></span>
                </button>
                <div class="w-8 h-8 rounded-full bg-primary-100 flex items-center justify-center cursor-pointer hover:ring-2 hover:ring-primary-300 transition-all">
                    <span class="text-xs font-bold text-primary-700">DR</span>
                </div>
            </div>
        </header>

        <!-- Page content -->
        <main class="flex-1 overflow-y-auto p-4 sm:p-6">
            @Body
        </main>

        <!-- Footer -->
        <footer class="bg-white border-t border-gray-100 px-6 py-3 text-center shrink-0">
            <span class="text-xs text-gray-400">&copy; @DateTime.Now.Year MyDentist. @L["Footer_Rights"]</span>
        </footer>
    </div>
</div>
